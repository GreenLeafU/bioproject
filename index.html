<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Aerobic Respiration</title>
        <link rel="stylesheet" href="styles.css">
      </head>
<body>
  <header>
    <h1>Aerobic Respiration Contest</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="mocktest.html">Mock Test</a>
    </nav>
  </header>

  <div class="container">
    <div class="problemset">
      <h2>Problemset</h2>
      <table>
        <thead>
          <tr><th>ID</th><th>Problem</th><th>Action</th></tr>
        </thead>
        <tbody id="problems"></tbody>
      </table>
    </div>
  </div>

  <div id="modal" class="modal">
    <div class="card">
      <div id="qtext">Question text</div>
      <div class="answers" id="answers"></div>
      <div style="margin-top:12px;text-align:right">
        <button id="closeBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- Load questions first -->
  <script src="questions.js"></script>

  <!-- Main script -->
  <script>
  if (typeof QUESTIONS === "undefined") {
    alert("QUESTIONS not loaded! Make sure questions.js is in the same folder as index.html.");
  } else {
    const problemsTable = document.getElementById('problems');
    QUESTIONS.forEach((Q,idx)=>{
      const tr=document.createElement('tr');
      const tdid=document.createElement('td');tdid.textContent=String.fromCharCode(65+idx);
      const tdtitle=document.createElement('td');tdtitle.textContent=Q.q;
      const tdaction=document.createElement('td');
      const btn=document.createElement('button');btn.textContent='Solve';
      btn.onclick=()=>openModal(idx);
      tdaction.appendChild(btn);
      tr.appendChild(tdid);tr.appendChild(tdtitle);tr.appendChild(tdaction);
      problemsTable.appendChild(tr);
    });

    const modal=document.getElementById('modal');
    const qtext=document.getElementById('qtext');
    const answersDiv=document.getElementById('answers');
    const closeBtn=document.getElementById('closeBtn');

    let current=null;

    function openModal(idx) {
  current = idx;
  qtext.innerHTML = QUESTIONS[idx].q;  // use innerHTML instead of textContent

  // If the question has an image, append it
  if (QUESTIONS[idx].img) {
    qtext.innerHTML += `<div style="margin-top:10px;">
                          <img src="${QUESTIONS[idx].img}" alt="Question image" style="max-width:100%; border-radius:8px;">
                        </div>`;
  }

  answersDiv.innerHTML = '';
  QUESTIONS[idx].a.forEach((ans, i) => {
    const d = document.createElement('div');
    d.className = 'answer';
    d.textContent = String.fromCharCode(65 + i) + '. ' + ans;
    d.onclick = () => selectAnswer(i);
    answersDiv.appendChild(d);
  });
  modal.style.display = 'flex';
}

    function selectAnswer(i){
      if(i===QUESTIONS[current].correct){
        alert('Correct!');
      }else{
        alert('Wrong! Correct answer: '+QUESTIONS[current].a[QUESTIONS[current].correct]);
      }
      modal.style.display='none';
    }

    closeBtn.onclick=()=>{modal.style.display='none'};
  }
  </script>
</body>
</html>